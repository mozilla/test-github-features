name: 'Deploy to fly'
description: 'Deploys a published image to fly'
inputs:
  image:
    required: true
    description: "Which image to deploy"
  config:
    required: true
    description: "Path to a fly.toml file"
  token:
    required: true
    description: "Access token for flyctl"

runs:
  using: 'docker'
  image: ghcr.io/superfly/flyctl:latest
  args:
    - deploy
    - -t ${{ inputs.token }}
    - -c ${{ inputs.config }}
    - --yes
    - --verbose
