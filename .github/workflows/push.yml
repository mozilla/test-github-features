name: Push

on:
  merge_group:
  push:
    branches:
      - main

jobs:
  deploy_staging:
    if: ${{ github.event_name == 'merge_group' }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Deploy to staging
        run: |
          echo "Deploying to staging"
          # Your deployment script here
  deploy_production:
    if: ${{ github.event_name == 'push' }} && ${{ github.ref == 'refs/heads/main' }}
    runs-on: ubuntu-latest
    needs: deploy_staging
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Deploy to production
        run: |
          echo "Deploying to production"
          # Your deployment script here

